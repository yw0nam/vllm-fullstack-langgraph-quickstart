# μ„¤μ • μ μ© (Apply Settings) κΈ°λ¥ κ°€μ΄λ“

## π“‹ κ°μ”

μ‚¬μ΄λ“λ°”μ— "β… μ„¤μ • μ μ©" λ²„νΌμ΄ μ¶”κ°€λμ—μµλ‹λ‹¤. μ΄ λ²„νΌμ„ ν†µν•΄ μ‚¬μ©μκ°€ μ…λ ¥ν• API ν‚¤λ“¤μ„ ν„μ¬ μ„Έμ…μ ν™κ²½ λ³€μμ— μ¦‰μ‹ μ μ©ν•  μ μμµλ‹λ‹¤.

## π― μ£Όμ” κΈ°λ¥

### 1. μ‹¤μ‹κ°„ API ν‚¤ μ μ©
- μ‚¬μ©μκ°€ μ…λ ¥ν• API ν‚¤λ¥Ό ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ„Έμ…μ— μ¦‰μ‹ μ μ©
- ν™κ²½ λ³€μ (`os.environ`)μ™€ config κ°μ²΄λ¥Ό λ™μ‹μ— μ—…λ°μ΄νΈ
- μ• ν”λ¦¬μΌ€μ΄μ… μ¬μ‹μ‘ μ—†μ΄ μƒλ΅μ΄ API ν‚¤ μ‚¬μ© κ°€λ¥

### 2. μ§€μ›ν•λ” API ν‚¤
- **Gemini API Key**: Google Gemini λ¨λΈ μ‚¬μ©μ„ μ„ν• ν‚¤
- **Tavily API Key**: Tavily κ²€μƒ‰ μ—”μ§„ μ‚¬μ©μ„ μ„ν• ν‚¤  
- **Google API Key**: Google Search grounding κΈ°λ¥ μ‚¬μ©μ„ μ„ν• ν‚¤ (λ¨λΈ μ„ νƒκ³Ό λ¬΄κ΄€ν•κ² ν•„μ”)

### 3. λ¨λΈκ³Ό κ²€μƒ‰ μ—”μ§„ μ΅°ν•©
- **vLLM + Tavily**: vLLM ν™κ²½μ„¤μ • + Tavily API ν‚¤ ν•„μ”
- **vLLM + Google Search**: vLLM ν™κ²½μ„¤μ • + Google API ν‚¤ ν•„μ” (Google Search grounding)
- **Gemini + Tavily**: Google API ν‚¤ (λ¨λΈμ©) + Tavily API ν‚¤ (κ²€μƒ‰μ©) ν•„μ”
- **Gemini + Google Search**: Google API ν‚¤ ν•λ‚λ΅ λ¨λΈκ³Ό κ²€μƒ‰ λ¨λ‘ μ‚¬μ©

### 3. μ¤λ§νΈν• UI ν”Όλ“λ°±
- π”” μ μ© λ€κΈ° μ¤‘μΈ μ„¤μ •μ΄ μμ„ λ• λ²„νΌμ— μ•λ¦Ό ν‘μ‹
- π’΅ API ν‚¤ μ…λ ¥ μ‹ "μ„¤μ • μ μ© ν•„μ”" μ•λ‚΄ λ©”μ‹μ§€
- β… μ μ© μ™„λ£ μ‹ μ„±κ³µ λ©”μ‹μ§€μ™€ ν•¨κ» μ–΄λ–¤ μ„¤μ •μ΄ μ μ©λμ—λ”μ§€ ν‘μ‹

## π”§ μ‚¬μ© λ°©λ²•

### λ‹¨κ³„λ³„ μ‚¬μ©λ²•

1. **API ν‚¤ μ…λ ¥**
   - λ¨λΈ μ„ νƒ μ„Ήμ…μ—μ„ μ›ν•λ” λ¨λΈ μ„ νƒ (Gemini λλ” vLLM)
   - κ²€μƒ‰ μ—”μ§„ μ„ νƒ (Tavily λλ” Google)
   - ν•΄λ‹Ήν•λ” API ν‚¤ μ…λ ¥ ν•„λ“μ— ν‚¤ μ…λ ¥

2. **μ„¤μ • μƒνƒ ν™•μΈ**
   - μ…λ ¥ν• ν‚¤κ°€ κΈ°μ΅΄ ν™κ²½ λ³€μμ™€ λ‹¤λ¥Ό κ²½μ° "π’΅ API ν‚¤λ¥Ό μ…λ ¥ν–μµλ‹λ‹¤. 'β… μ„¤μ • μ μ©' λ²„νΌμ„ λλ¬ μ μ©ν•μ„Έμ”." λ©”μ‹μ§€ ν‘μ‹
   - μ μ© λ²„νΌμ— π”” μ•λ¦Ό μ•„μ΄μ½ ν‘μ‹

3. **μ„¤μ • μ μ©**
   - "β… μ„¤μ • μ μ©" λ²„νΌ ν΄λ¦­
   - μ„±κ³µ λ©”μ‹μ§€μ™€ ν•¨κ» μ μ©λ μ„¤μ • λ©λ΅ ν™•μΈ
   - μƒλ΅μ΄ λ€ν™”μ—μ„ μ μ©λ API ν‚¤ μ‚¬μ© κ°€λ¥

## π“ ν„μ¬ μ„¤μ • μ„Ήμ… κ°μ„ 

### μƒμ„Έν• μƒνƒ ν‘μ‹
μ„¤μ • μ •λ³΄ μ„Ήμ…μ—μ„ κ° API ν‚¤μ μƒνƒλ¥Ό μμ„Έν ν‘μ‹:

- **β… μ„¤μ •λ¨ (ν™κ²½λ³€μμ—μ„)**: .env νμΌμ—μ„ λ΅λ“λ ν‚¤
- **β… μ„¤μ •λ¨ (μ‚¬μ©μμ…λ ¥ - μ μ© ν•„μ”)**: μ…λ ¥λμ—μ§€λ§ μ•„μ§ μ μ©λμ§€ μ•μ€ ν‚¤
- **β… μ„¤μ •λ¨ (ν™κ²½λ³€μ + μ‚¬μ©μμ…λ ¥ λ³‘ν•©λ¨)**: ν™κ²½λ³€μμ™€ μ‚¬μ©μμ…λ ¥μ΄ λ¨λ‘ μκ³  μ μ©λ μƒνƒ
- **β μ„¤μ •λμ§€ μ•μ**: ν‚¤κ°€ μ—†λ” μƒνƒ

## π’΅ μ£Όμ” μ¥μ 

### 1. κ°λ° νΈμμ„±
- ν™κ²½ λ³€μ νμΌ(.env) μμ • μ—†μ΄ μ¦‰μ‹ API ν‚¤ ν…μ¤νΈ κ°€λ¥
- μ—¬λ¬ API ν‚¤λ¥Ό λ™μ μΌλ΅ μ „ν™ν•μ—¬ ν…μ¤νΈ κ°€λ¥

### 2. μ‚¬μ©μ μΉν™”μ„±
- μ§κ΄€μ μΈ UIλ΅ ν„μ¬ μ„¤μ • μƒνƒλ¥Ό ν•λμ— νμ•…
- λ…ν™•ν• ν”Όλ“λ°±μΌλ΅ μ μ© ν•„μ” μ—¬λ¶€ μ•λ‚΄

### 3. μ•μ „μ„±
- κΈ°μ΅΄ ν™κ²½ λ³€μλ” μ μ§€ν•λ©΄μ„ μ„Έμ… λ λ²¨μ—μ„λ§ μ¤λ²„λΌμ΄λ“
- μ…λ ¥λ ν‚¤λ§ μ„ νƒμ μΌλ΅ μ μ© (λΉ ν‚¤λ” λ¬΄μ‹)

## π” κΈ°μ  κµ¬ν„ μ„Έλ¶€μ‚¬ν•­

### ν•µμ‹¬ λ©”μ„λ“

```python
def _apply_user_settings(self):
    """μ‚¬μ©μκ°€ μ…λ ¥ν• API ν‚¤λ“¤μ„ ν„μ¬ μ„¤μ •μ— μ μ©ν•©λ‹λ‹¤."""
    # os.environκ³Ό self.configλ¥Ό λ™μ‹μ— μ—…λ°μ΄νΈ
    # μ μ©λ μ„¤μ • λ©λ΅μ„ μ‚¬μ©μμ—κ² ν”Όλ“λ°±
```

```python
def _has_pending_settings(self):
    """μ μ©λμ§€ μ•μ€ μ‚¬μ©μ μ„¤μ •μ΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤."""
    # μ…λ ¥λ ν‚¤μ™€ ν„μ¬ configμ ν‚¤λ¥Ό λΉ„κµν•μ—¬ μ μ© ν•„μ” μ—¬λ¶€ νλ‹¨
```

### μ„Έμ… μƒνƒ κ΄€λ¦¬
- `st.session_state.settings_applied`: μ„¤μ • μ μ© μƒνƒ μ¶”μ 
- μ‚¬μ©μ μ…λ ¥ ν‚¤λ“¤κ³Ό ν„μ¬ config ν‚¤λ“¤μ„ λΉ„κµν•μ—¬ λ™μ  μƒνƒ κ΄€λ¦¬

## π€ μ‚¬μ© μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: μƒλ΅μ΄ API ν‚¤ ν…μ¤νΈ
1. Gemini API ν‚¤λ¥Ό μƒλ΅ λ°κΈ‰λ°›μ
2. μ‚¬μ΄λ“λ°”μ—μ„ Gemini μ„ νƒ ν›„ μƒ ν‚¤ μ…λ ¥
3. "μ„¤μ • μ μ©" λ²„νΌμΌλ΅ μ¦‰μ‹ μ μ©
4. λ°”λ΅ μƒλ΅μ΄ ν‚¤λ΅ λ€ν™” μ‹μ‘

### μ‹λ‚λ¦¬μ¤ 2: vLLM + Google Search μ΅°ν•© μ‚¬μ©
1. λ΅μ»¬ vLLM μ„λ²„λ” μ΄λ―Έ μ‹¤ν–‰ μ¤‘
2. Google Searchλ¥Ό μ‚¬μ©ν•κ³  μ‹¶μ
3. Google API ν‚¤ μ…λ ¥ ν›„ μ„¤μ • μ μ©
4. κ²€μƒ‰ νƒ€μ…μ„ Googleλ΅ λ³€κ²½
5. vLLM λ¨λΈλ΅ λ€ν™”ν•λ©΄μ„ Google Search groundingμΌλ΅ κ²€μƒ‰ μν–‰

### μ‹λ‚λ¦¬μ¤ 3: κ²€μƒ‰ μ—”μ§„ μ „ν™
1. Tavilyμ—μ„ Google Searchλ΅ μ „ν™ν•κ³  μ‹¶μ
2. Google API ν‚¤ μ…λ ¥ ν›„ μ„¤μ • μ μ©
3. κ²€μƒ‰ νƒ€μ…μ„ Googleλ΅ λ³€κ²½
4. Google Search grounding κΈ°λ¥ μ‚¬μ©

μ΄ κΈ°λ¥μ„ ν†µν•΄ μ‚¬μ©μλ” λ”μ± μ μ—°ν•κ³  νΈλ¦¬ν•κ² λ‹¤μ–‘ν• API ν‚¤λ¥Ό ν…μ¤νΈν•κ³  μ‚¬μ©ν•  μ μμµλ‹λ‹¤.